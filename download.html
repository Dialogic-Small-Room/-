<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <title>ダウンロード配布所</title>
  <style>
    body {
      background-color: black;
      color: white;
      font-family: Arial, sans-serif;
    }
    .download-section {
      text-align: center;
      margin-top: 50px;
    }
    .download-list {
      list-style-type: none;
      padding: 0;
    }
    .character {
      margin-bottom: 30px;
    }
    .character-icon {
      width: 100px;
      height: 100px;
    }
    .character-info {
      margin-top: 10px;
    }
    .divider {
      border: 0;
      height: 1px;
      background-color: white;
      margin: 20px 0;
    }
    .password-section {
      margin: 40px 0;
      display: none; /* Initially hidden */
    }
    .password-input {
      background-color: black;
      color: white;
      border: 2px solid white;
      padding: 10px;
      width: 200px;
      ime-mode: active; /* Enable IME for Japanese input */
    }
    .call-button {
      background-color: black;
      color: white;
      border: 2px solid white;
      padding: 10px 20px;
      cursor: pointer;
      transition: background-color 0.3s, color 0.3s;
      margin-top: 10px;
    }
    .call-button:hover {
      background-color: white;
      color: black;
    }
    .error-message {
      color: gray; /* モノクロのエラーメッセージ */
      margin-top: 10px;
      display: none;
    }
    .agreement-popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: black;
      color: white;
      border: 2px solid white;
      padding: 20px;
      text-align: center;
      z-index: 10000;
      box-shadow: 0 0 10px white;
      display: none;
    }
    .agreement-popup button {
      background-color: black;
      color: white;
      border: 2px solid white;
      padding: 10px 20px;
      margin: 10px;
      cursor: pointer;
      transition: background-color 0.3s, color 0.3s;
    }
    .agreement-popup button:hover {
      background-color: white;
      color: black;
    }
  </style>
  <script>
    let downloadLink = ''; // Variable to hold the download link

    function showAgreementPopup(link) {
      downloadLink = link;
      var popup = document.getElementById('agreementPopup');
      popup.style.display = 'block';
    }

    function agreeToTerms() {
      document.getElementById('agreementPopup').style.display = 'none';
      document.querySelector('.password-section').style.display = 'block';
    }

    function disagreeToTerms() {
      document.getElementById('agreementPopup').style.display = 'none';
    }

    function startDownload() {
      const password = document.getElementById('password').value;
      const errorMessage = document.getElementById('errorMessage');

      // Validate password (hiragana only)
      if (!/^[\u3040-\u309F]+$/.test(password)) {
        errorMessage.innerText = "パスワードはひらがなで入力してください";
        errorMessage.style.display = 'block';
        return;
      }

      if ((password === 'ともだちになろう' && downloadLink.includes('Nea')) ||
          (password === 'ねあもいるよ' && downloadLink.includes('Neo'))) {
        errorMessage.style.display = 'none';
        window.location.href = downloadLink;
      } else {
        errorMessage.innerText = "パスワードが間違っています";
        errorMessage.style.display = 'block';
      }
    }
  </script>
</head>
<body>
  <header>
    <h1>ダウンロード配布所</h1>
  </header>
  <main>
    <section class="download-section">
      <h2>UTAU 配布ファイル</h2>
      <p>キャラの名前を押して、利用規約に同意してください。その後、パスワードを入力してUTAUを呼びかけてください。</p>
      <hr class="divider"> <!-- 区切り線 -->
      <ul class="download-list">
        <li>
          <div class="character">
            <img src="nea_icon.jpg" alt="Neaのアイコン" class="character-icon">
            <div class="character-info">
              <button class="download-button" onclick="showAgreementPopup('Nea.zip')">Nea 単独音</button>
            </div>
          </div>
        </li>
        <hr class="divider"> <!-- 区切り線 -->
        <li>
          <div class="character">
            <img src="neo_icon.jpg" alt="Neoのアイコン" class="character-icon">
            <div class="character-info">
              <button class="download-button" onclick="showAgreementPopup('Neo.zip')">Neo 単独音</button>
            </div>
          </div>
        </li>
      </ul>
      <div class="password-section">
        <input id="password" type="text" class="password-input" placeholder="ひらがなでパスワードを入力してください">
        <button class="call-button" onclick="startDownload()">呼びかける</button>
        <p id="errorMessage" class="error-message">パスワードが間違っています</p>
      </div>
    </section>
  </main>
  <footer>
    <p>&copy; 2024 okinai</p>
  </footer>
  <div id="agreementPopup" class="agreement-popup">
    <p>利用規約をご一読の上、同意しますか？</p>
    <button onclick="agreeToTerms()">はい</button>
    <button onclick="disagreeToTerms()">いいえ</button>
  </div>
</body>
</html>
